# **åˆ›å»ºå’Œè®¢é˜… Observable**

æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åˆ›å»ºå’Œè®¢é˜… `Observable` åºåˆ—ã€‚

## [never](http://reactivex.io/documentation/operators/empty-never-throw.html)

åˆ›å»ºä¸€ä¸ªæ°¸ä¸ç»ˆæ­¢ä¸”æ°¸è¿œä¸ä¼šå‘å‡ºä»»ä½•äº‹ä»¶çš„åºåˆ—ã€‚

```swift
let disposeBag = DisposeBag()
let neverSequence = Observable<String>.never()

let neverSequenceSubscription = neverSequence.subscribe { _ in
    print("æ°¸è¿œä¸ä¼šæ‰“å°å‡ºæ¥")
}

neverSequenceSubscription.disposed(by: disposeBag)
```

## [empty](http://reactivex.io/documentation/operators/empty-never-throw.html)

åˆ›å»ºä¸€ä¸ªä»…å‘å‡º completed äº‹ä»¶çš„ç©º `Observable` åºåˆ—ã€‚

```swift
let disposeBag = DisposeBag()

Observable<Int>.empty().subscribe { event in
    print(event)
}.disposed(by: disposeBag)

// completed
```

> <font color=orange>**æ³¨æ„**</font>
>
> æ­¤ç¤ºä¾‹è¿˜å¼•å…¥é“¾æ¥åœ¨ä¸€èµ·åˆ›å»ºå’Œè®¢é˜… `Observable` åºåˆ—ã€‚

## [just](http://reactivex.io/documentation/operators/just.html)

ä½¿ç”¨å•ä¸ªå…ƒç´ åˆ›å»º `Observable` åºåˆ—ã€‚

```swift
let disposeBag = DisposeBag()

Observable.just("ğŸ”´").subscribe { event in
		print(event)
}.disposed(by: disposeBag)

// next(ğŸ”´)
// completed
```

## of

åˆ›å»ºå…·æœ‰å›ºå®šæ•°é‡å…ƒç´ çš„ `Observable` åºåˆ—ã€‚

```swift
let disposeBag = DisposeBag()

Observable.of("ğŸ¶", "ğŸ±", "ğŸ­", "ğŸ¹").subscribe(onNext: { element in
		print(element)
}).disposed(by: disposeBag)

/** 
 ğŸ¶
 ğŸ±
 ğŸ­
 ğŸ¹
*/
```

> <font color=orange>**æ³¨æ„**</font>
>
> æ­¤ç¤ºä¾‹è¿˜ä»‹ç»äº†ä½¿ç”¨ `subscribe(onNext:)` æ–¹ä¾¿æ–¹æ³•ã€‚ä¸ `subscribe(_:)` ( è®¢é˜…æ‰€æœ‰ç±»å‹çš„äº‹ä»¶å¤„ç†ç¨‹åº ( nextã€errorã€completed ) ) ä¸åŒï¼Œ`subscribe(onNext:)` è®¢é˜…ä¸€ä¸ªå…ƒç´ å¤„ç†ç¨‹åºï¼Œå®ƒå°†å¿½ç•¥ error å’Œ completed äº‹æƒ…å¹¶ä»…ç”Ÿæˆ next äº‹ä»¶å…ƒç´ ã€‚è¿˜æœ‰ `subscribe(onError:)` å’Œ `subscribe(onCompleted:)` æ–¹ä¾¿æ–¹æ³•ï¼Œå¦‚æœä½ åªæƒ³è®¢é˜…è¿™äº›äº‹ä»¶ç±»å‹ã€‚å¹¶ä¸”æœ‰ä¸€ä¸ª `subscribe(onNext:onError:onCompleted:onDisposed:)` æ–¹æ³•ï¼Œå®ƒå…è®¸æ‚¨å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªäº‹ä»¶ç±»å‹ä½œå‡ºååº”ï¼Œå½“è®¢é˜…å› ä»»ä½•åŸå› ç»ˆæ­¢æˆ–åœ¨ä¸€æ¬¡è°ƒç”¨ä¸­è¢«å¤„ç†æ—¶ï¼š

> <font color=gray>**Example**</font>
>
> ```swift
> someObservable.subscribe(
>     onNext: { print("Element:", $0) },
>     onError: { print("Error:", $0) },
>     onCompleted: { print("Completed") },
>     onDisposed: { print("Disposed") }
> )
> ```

## from

ä» `Sequence` åˆ›å»ºä¸€ä¸ª `Observable` åºåˆ—ï¼Œä¾‹å¦‚ `Array` ã€`Dictionary` æˆ– `Set` ã€‚

```swift
let disposeBag = DisposeBag()

Observable.from(["ğŸ¶", "ğŸ±", "ğŸ­", "ğŸ¹"]).subscribe(onNext: { 
		print($0)
}).disposed(by: disposeBag)

/**
 ğŸ¶
 ğŸ±
 ğŸ­
 ğŸ¹
*/
```

><font color=orange>**æ³¨æ„**</font>
>
>æ­¤ç¤ºä¾‹è¿˜æ¼”ç¤ºäº†ä½¿ç”¨é»˜è®¤å‚æ•°åç§° `$0` è€Œä¸æ˜¯æ˜¾å¼å‘½åå‚æ•°ã€‚

## [Create](http://reactivex.io/documentation/operators/create.html)

åˆ›å»ºè‡ªå®šä¹‰ `Observable` åºåˆ—ã€‚

```swift
let disposeBag = DisposeBag()

let myJust = { (element: String) -> Observable<String> in
    return Observable.create { observer in
        observer.on(.next(element))
        observer.on(.completed)
        return Disposables.create()
    }
}

myJust("ğŸ”´").subscribe { 
		print($0)
}.disposed(by: disposeBag)

// next(ğŸ”´)
// completed
```

## [range](http://reactivex.io/documentation/operators/range.html)

åˆ›å»ºä¸€ä¸ª `Observable` åºåˆ—ï¼Œè¯¥åºåˆ—å‘å‡ºä¸€ç³»åˆ—è¿ç»­çš„æ•´æ•°ç„¶åç»ˆæ­¢ã€‚

```swift
let disposeBag = DisposeBag()
    
Observable.range(start: 1, count: 10).subscribe { 
		print($0) 
}.disposed(by: disposeBag)

/**
 next(1)
 next(2)
 next(3)
 next(4)
 next(5)
 next(6)
 next(7)
 next(8)
 next(9)
 next(10)
 completed
*/
```

## [repeatElement](http://reactivex.io/documentation/operators/repeat.html)

åˆ›å»ºä¸€ä¸ª `Observable` åºåˆ—ï¼Œæ— é™æœŸåœ°å‘å‡ºç»™å®šå…ƒç´ ã€‚

```swift
let disposeBag = DisposeBag()

Observable.repeatElement("ğŸ”´").take(3).subscribe(onNext: { 
	  print($0)
}).disposed(by: disposeBag)

// ğŸ”´
// ğŸ”´
// ğŸ”´
```

> <font color=orange>**æ³¨æ„**</font>
>
> æ­¤ç¤ºä¾‹è¿˜ä»‹ç»äº†ä½¿ç”¨ `take` è¿ç®—ç¬¦ä»åºåˆ—çš„å¼€å¤´è¿”å›æŒ‡å®šæ•°é‡çš„å…ƒç´ ã€‚

## generate

åˆ›å»ºä¸€ä¸ª `Observable` åºåˆ—ï¼Œåªè¦æä¾›çš„æ¡ä»¶ä¸º `true` å°±ä¼šç”Ÿæˆå€¼ã€‚

```swift
let disposeBag = DisposeBag()

Observable.generate(initialState: 0, 
                    condition: { $0 < 3 }, 
                    iterate: { $0 + 1 })
.subscribe(onNext: { 
	  print($0)
}).disposed(by: disposeBag)

// 0
// 1
// 2
```

## [deferred](http://reactivex.io/documentation/operators/defer.html)

ä¸ºæ¯ä¸ªè®¢é˜…è€…åˆ›å»ºä¸€ä¸ªæ–°çš„ `Observable` åºåˆ—ã€‚

```swift
let disposeBag = DisposeBag()
var count = 1

let deferredSequence = Observable<String>.deferred {
    print("Creating \(count)")
    count += 1

    return Observable.create { observer in
        print("Emitting...")
        observer.onNext("ğŸ¶")
        observer.onNext("ğŸ±")
        observer.onNext("ğŸµ")
        return Disposables.create()
    }
}

deferredSequence.subscribe(onNext: { 
	  print($0) 
}).disposed(by: disposeBag)

deferredSequence.subscribe(onNext: { 
	  print($0) 
}).disposed(by: disposeBag)

/**
 Creating 1
 Emitting...
 ğŸ¶
 ğŸ±
 ğŸµ
 Creating 2
 Emitting...
 ğŸ¶
 ğŸ±
 ğŸµ
*/
```

## error

åˆ›å»ºä¸€ä¸ª `Observable` åºåˆ—ï¼Œè¯¥åºåˆ—ä¸ä¼šå‘å‡ºä»»ä½•é¡¹ç›®ï¼Œå¹¶ç«‹å³ä»¥é”™è¯¯ç»ˆæ­¢ã€‚

```swift
let disposeBag = DisposeBag()

Observable<Int>.error(TestError.test).subscribe { 
		print($0)
}.disposed(by: disposeBag)

// error(test)
```

## [doOn](http://reactivex.io/documentation/operators/do.html)

ä¸ºæ¯ä¸ªå‘å‡ºçš„äº‹ä»¶è°ƒç”¨å‰¯ä½œç”¨æ“ä½œï¼Œå¹¶è¿”å› ( ä¼ é€’ ) åŸå§‹äº‹ä»¶ã€‚

```swift
let disposeBag = DisposeBag()

Observable.of("ğŸ", "ğŸ", "ğŸŠ", "ğŸ‹").do(onNext: {
  	print("Intercepted:", $0)
}, afterNext: {
  	print("Intercepted after:", $0)
}, onError: {
  	print("Intercepted error:", $0)
}, afterError: {
  	print("Intercepted after error:", $0)
}, onCompleted: {
		print("Completed")
}, afterCompleted: {
		print("After completed")
}).subscribe(onNext: {
    print($0)
}).disposed(by: disposeBag)

/**
 Intercepted: ğŸ
 ğŸ
 Intercepted after: ğŸ
 Intercepted: ğŸ
 ğŸ
 Intercepted after: ğŸ
 Intercepted: ğŸŠ
 ğŸŠ
 Intercepted after: ğŸŠ
 Intercepted: ğŸ‹
 ğŸ‹
 Intercepted after: ğŸ‹
 Completed
 After completed
*/
```

> <font color=orange>**æ³¨æ„**</font>
>
> è¿˜æœ‰ `doOnNext(_:)` ã€`doOnError(_:)` å’Œ `doOnCompleted(_:)` æ–¹ä¾¿æ–¹æ³•æ‹¦æˆªè¿™äº›ç‰¹å®šäº‹ä»¶ï¼Œ`doOn(onNext:onError:onCompleted:)` æ‹¦æˆªä¸€æ¬¡è°ƒç”¨ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªäº‹ä»¶ã€‚